(window.webpackJsonp=window.webpackJsonp||[]).push([[145],{1647:function(e,t,n){e.exports={"notice-container":"notice-container-2jv",noticeContainer:"notice-container-2jv","empty-notice":"empty-notice-1As",emptyNotice:"empty-notice-1As",note:"note-vgw","notice-header":"notice-header-3-x",noticeHeader:"notice-header-3-x",create:"create-5zo",title:"title-23I","notice-list-item":"notice-list-item-27r",noticeListItem:"notice-list-item-27r",avatar:"avatar-8V7","notice-preview":"notice-preview-2kS",noticePreview:"notice-preview-2kS","preview-content":"preview-content-2SM",previewContent:"preview-content-2SM",ellipse:"ellipse-1pq","preview-action-bar":"preview-action-bar-2Ds",previewActionBar:"preview-action-bar-2Ds",name:"name-3du","preview-timestamp":"preview-timestamp-i_H",previewTimestamp:"preview-timestamp-i_H","editor-header":"editor-header-vr3",editorHeader:"editor-header-vr3",markeditor:"markeditor-3Vh","notice-detail":"notice-detail-1QY",noticeDetail:"notice-detail-1QY","detail-avatar":"detail-avatar-3Gh",detailAvatar:"detail-avatar-3Gh","detail-content":"detail-content-38J",detailContent:"detail-content-38J","detail-action-bar":"detail-action-bar-Sbs",detailActionBar:"detail-action-bar-Sbs","detail-timestamp":"detail-timestamp-2Vh",detailTimestamp:"detail-timestamp-2Vh",delete:"delete-1dL",edit:"edit-1n3",icon:"icon-2rL",navigation:"navigation-2Hj","bread-crumb":"bread-crumb-2MM",breadCrumb:"bread-crumb-2MM"}},1698:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ACTION={FETCH_DEPOLY_KEY:"DEPLOY_KEY.FETCH_KEYS"},t.contentPlaceHolder="\u8bf7\u7c98\u8d34\u5f62\u5982\u8fd9\u6837\u7684\u683c\u5f0f\u7684 ssh-rsa \u516c\u94a5\uff1a ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDHI6/Zs8DVJduqR0DHO8s5JDT4SpnXS+jvLJkAuji2G3nBYTdtjfvMx6i6ei6Lxv3MMecogYyujhIx/k9111+8ZqFpJAywNTfNuw/JiLaH989QLdM7F2NaJi3OHV8484Z6KKvBXyO99HIG/oCNYDYp/78kd0kz8b0ghlXG3M8YRHd5udV6VErKS5qQHH9WTsEaF2VZjrEPalYULHXJ7pikuKmwZ8CVlyqhPxCbHG4wdKprATpdpiax1i5mmH/+pt0vzK01RgZ/ibhVkFaAmxOCWxTSNstqAlYd+z01/688IUIIWqfbzMe7FSp4CLezlIn8UIowb8xw+yRcYMl2Lqon coding@MBP"},1799:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ACTION={CREATE_PROJECT_NOTICE:"NOTICE.CREATE.PROJECT.NOTICE",DELETE_PROJECT_NOTICE:"NOTICE.DELETE.PROJECT.NOTICE",GET_PROJECT_NOTICE_BY_ID:"NOTICE.GET.PROJECT.NOTICE.BY.ID",GET_PROJECT_NOTICES:"NOTICE.GET.PROJECT.NOTICES",UPDATE_TOTAL_PAGE:"NOTICE.UPDATE.TOTAL.PAGE",UPDATE_PAGER:"NOTICE.UPDATE.PAGER",UPDATE_PROJECT_NOTICE:"NOTICE.UPDATE.PROJECT.NOTICE"},t.ROLE_AUTH={OWNER:100,ADMIN:90,MEMBER:80,LIMITED_MEMBER:75}},1963:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ACTION={GET_SERVICE_INFO:"SUMMARY.GET.SERVICE.INFO",GET_EXPORT_INFO:"SUMMARY.GET.EXPORT.INFO"}},1989:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProjectNotice=function(e){return(0,o.dispatchWithProjectIdApiPrefix)(function(t,n){return(0,o.autoDispatch)((0,r.post)(t+"/tweet",{content:e}),n,a.ACTION.CREATE_PROJECT_NOTICE)})},t.deleteProjectNotice=function(e){return(0,o.dispatchWithProjectIdApiPrefix)(function(t,n){return(0,o.autoDispatch)((0,r.del)(t+"/tweet/"+e),n,a.ACTION.DELETE_PROJECT_NOTICE,function(){return{noticeID:e}})})},t.getProjectNoticeById=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,r.buildParams)({withRaw:t});return(0,o.dispatchWithProjectIdApiPrefix)(function(t,l){return(0,o.autoDispatch)((0,r.get)(t+"/tweet/"+e+"?"+n),l,a.ACTION.GET_PROJECT_NOTICE_BY_ID,function(e){var t=e.data;return(0,r.toCamelCase)(t)})})},t.getProjectNotices=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,r.buildParams)({page:e,withRaw:t}),l=n?"?"+n:"";return(0,o.dispatchWithProjectIdApiPrefix)(function(e,t){return(0,o.autoDispatch)((0,r.get)(e+"/notices"+l),t,a.ACTION.GET_PROJECT_NOTICES,function(e){var t=e.data;return(0,r.toCamelCase)(t)})})},t.updatePager=function(e){return{type:a.ACTION.UPDATE_PAGER,pager:e}},t.updateProjectNotice=function(e,t){return(0,o.dispatchWithProjectIdApiPrefix)(function(n,l){return(0,o.autoDispatch)((0,r.put)(n+"/tweet/"+e,{raw:t}),l,a.ACTION.UPDATE_PROJECT_NOTICE,function(e){var t=e.data;return(0,r.toCamelCase)(t)})})};var r=n(84),o=n(548),a=n(1799)},1990:function(e,t,n){e.exports={title:"title-353",alert:"alert-2hI","service-info":"service-info-9yV",serviceInfo:"service-info-9yV","service-info-head":"service-info-head-1YW",serviceInfoHead:"service-info-head-1YW","project-name":"project-name-3AP",projectName:"project-name-3AP",label:"label-FZV",grid:"grid-2eG","grid-child":"grid-child-2Pa",gridChild:"grid-child-2Pa","info-bar":"info-bar-1m_",infoBar:"info-bar-1m_","info-title":"info-title-2_U",infoTitle:"info-title-2_U","info-detail":"info-detail-10f",infoDetail:"info-detail-10f","project-export":"project-export-VZG",projectExport:"project-export-VZG",exportTips:"exportTips-2Q4",exportBtn:"exportBtn-14I",timestamp:"timestamp-2Ph","progress-bar":"progress-bar-sXx",progressBar:"progress-bar-sXx",progress:"progress-2us",danger:"danger-2Hr",warning:"warning-2Ib",normal:"normal-3j1"}},1991:function(e,t,n){e.exports={"webhook-container":"webhook-container-ogN",webhookContainer:"webhook-container-ogN",header:"header-1rR","add-btn":"add-btn-1bB",addBtn:"add-btn-1bB","hook-list":"hook-list-2lD",hookList:"hook-list-2lD",remove:"remove-1M5","webhook-form":"webhook-form-LxG",webhookForm:"webhook-form-LxG",input:"input-ayC","button-group":"button-group-2F6",buttonGroup:"button-group-2F6"}},2278:function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}({0:function(e,t,n){e.exports=n(37)},2:function(e,t){e.exports=n(2)},3:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=r(n(4)),i=n(2),u=r(i),c=r(n(5)),f=r(n(6));n(7);var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className"]),r=(0,f.default)(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({"cuk-icon":!0},t,t));return u.default.createElement(c.default,o({},n,{className:r}))}}]),t}();s.propTypes={className:l.default.string},s.defaultProps={},t.default=s},4:function(e,t){e.exports=n(0)},5:function(e,t){e.exports=n(47)},6:function(e,t){e.exports=n(8)},7:function(e,t){},37:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=r(n(2)),i=r(n(3)),u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=void 0===t?null:t,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className"]);return l.default.createElement(i.default,o({viewBox:"0 0 40 40",className:"cuk-icon-trash-o "+n},r),l.default.createElement("g",null,l.default.createElement("path",{d:"m15.9 16.4v12.9q0 0.3-0.2 0.5t-0.5 0.2h-1.4q-0.3 0-0.5-0.2t-0.2-0.5v-12.9q0-0.3 0.2-0.5t0.5-0.2h1.4q0.3 0 0.5 0.2t0.2 0.5z m5.7 0v12.9q0 0.3-0.2 0.5t-0.5 0.2h-1.4q-0.3 0-0.5-0.2t-0.2-0.5v-12.9q0-0.3 0.2-0.5t0.5-0.2h1.4q0.3 0 0.5 0.2t0.2 0.5z m5.8 0v12.9q0 0.3-0.2 0.5t-0.6 0.2h-1.4q-0.3 0-0.5-0.2t-0.2-0.5v-12.9q0-0.3 0.2-0.5t0.5-0.2h1.4q0.4 0 0.6 0.2t0.2 0.5z m2.8 16.2v-21.2h-20v21.2q0 0.5 0.2 0.9t0.3 0.6 0.2 0.2h18.6q0.1 0 0.2-0.2t0.4-0.6 0.1-0.9z m-15-24h10l-1.1-2.6q-0.1-0.2-0.3-0.3h-7.1q-0.2 0.1-0.4 0.3z m20.7 0.7v1.4q0 0.3-0.2 0.5t-0.5 0.2h-2.1v21.2q0 1.8-1.1 3.2t-2.5 1.3h-18.6q-1.4 0-2.5-1.3t-1-3.1v-21.3h-2.2q-0.3 0-0.5-0.2t-0.2-0.5v-1.4q0-0.3 0.2-0.5t0.5-0.2h6.9l1.6-3.8q0.3-0.8 1.2-1.4t1.7-0.5h7.2q0.9 0 1.8 0.5t1.2 1.4l1.5 3.8h6.9q0.3 0 0.5 0.2t0.2 0.5z"})))}}]),t}();t.default=u}})},2279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeOptions=void 0;var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=g(n(0)),u=n(2),c=g(u),f=g(n(261)),s=n(1506),d=g(n(701)),p=g(n(544)),h=n(226),m=n(715),y=n(168),b=n(112),v=n(106),E=g(n(1991));function g(e){return e&&e.__esModule?e:{default:e}}var P=d.default.CheckboxGroup,w=t.typeOptions=[{label:"Push",value:"typePush"},{label:"Merge Request",value:"typeMrPr"},{label:"Member",value:"typeMember"},{label:"Document",value:"typeDocument"},{label:"Task",value:"typeTask"}],_=(o=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onSubmit=e.onSubmit.bind(e),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),l(t,[{key:"onSubmit",value:function(e){var t=this,n=this.props,r=n.projectPath;(0,n.createWebhook)(e).then(function(){(0,b.success)("\u65b0\u5efa\u6210\u529f"),v.IS_ENTERPRISE?t.props.push(r+"/setting/webhook/v1"):t.props.push(r+"/setting/webhook")})}},{key:"render",value:function(){var e=this.props,t=e.fields,n=t.hookUrl,r=t.token,o=t.type,l=e.projectPath,i=e.handleSubmit,u="";return u=v.IS_ENTERPRISE?l+"/setting/webhook/v1":l+"/setting/webhook",c.default.createElement("div",{className:E.default.webhookContainer},c.default.createElement("div",{className:E.default.header},c.default.createElement("h2",{className:"layout-content-h2"},"\u65b0\u5efa Webhook")),c.default.createElement("form",{className:E.default.webhookForm,onSubmit:i(this.onSubmit)},c.default.createElement("div",{className:E.default.title},"URL"),c.default.createElement("div",{className:E.default.input},c.default.createElement(f.default,a({type:"input",block:!0,size:"large"},(0,s.input)(n)))),c.default.createElement("div",{className:E.default.title},"Token"),c.default.createElement("div",{className:E.default.input},c.default.createElement(f.default,a({type:"input",value:r,block:!0,size:"large",placeholder:"\u975e\u5fc5\u586b"},(0,s.input)(r)))),c.default.createElement("h3",null,"\u76d1\u542c\u4e8b\u4ef6"),c.default.createElement(P,a({options:w},o)),c.default.createElement("div",{className:E.default.buttonGroup},c.default.createElement(p.default,{htmlType:"submit",onClick:this.submit},"\u65b0\u5efa"),c.default.createElement(y.Link,{to:u},c.default.createElement(p.default,{empty:!0},"\u53d6\u6d88")))))}}]),t}(),r.propTypes=a({projectPath:i.default.string},m.propTypes),o);t.default=(0,m.reduxForm)({form:"WebhookNewForm",fields:["hookUrl","token","type"]},function(){return{initialValues:{type:["typePush","typeMrPr"]}}},{push:h.routerActions.push})(_)},2280:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchDeployKeys=function(){return(0,o.dispatchWithProjectAPIPrefix)(function(e,t){return(0,o.autoDispatch)((0,r.get)(e+"/git/deploy_keys"),t,a.ACTION.FETCH_DEPOLY_KEY,function(e){return e.data.map(r.toCamelCase)})})},t.deleteDeployKey=function(e,t,n,a){return(0,o.dispatchWithProjectAPIPrefix)(function(e){return(0,r.post)(e+"/git/unbind_deploy_key/"+n+"?two_factor_code="+a)})},t.createDeployKey=function(e,t,n,a){return(0,o.dispatchWithProjectAPIPrefix)(function(e){return(0,r.post)(e+"/git/deploy_key?two_factor_code="+a,n)})};var r=n(84),o=n(548),a=n(1698)},2281:function(e,t,n){e.exports={"deploy-key-container":"deploy-key-container-3Ih",deployKeyContainer:"deploy-key-container-3Ih",header:"header-3TZ","title-wrap":"title-wrap-EBu",titleWrap:"title-wrap-EBu","link-wrap":"link-wrap-1Xu",linkWrap:"link-wrap-1Xu","add-btn":"add-btn-2Xv",addBtn:"add-btn-2Xv","enterprise-warning":"enterprise-warning-25Q",enterpriseWarning:"enterprise-warning-25Q",remove:"remove-13R","deploy-key-form":"deploy-key-form-1yt",deployKeyForm:"deploy-key-form-1yt",checkbox:"checkbox-3Un","button-group":"button-group-1Ey",buttonGroup:"button-group-1Ey"}},3772:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(3773)),o=i(n(3775)),a=i(n(3776)),l=n(1449);function i(e){return e&&e.__esModule?e:{default:e}}t.default={path:"notice",documentTitle:(0,l.projectPage)(function(){return"\u9879\u76ee\u516c\u544a"}),getComponent:function(e,t){n.e(156).then(function(){t(null,n(3921).default)}.bind(null,n)).catch(n.oe)},indexRoute:{component:a.default},childRoutes:[{path:"create",component:o.default},{path:":noticeID/edit",component:o.default},{path:":noticeID",component:r.default}]}},3773:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=P(n(0)),a=n(2),l=P(a),i=n(168),u=n(226),c=P(n(76)),f=P(n(262)),s=P(n(1472)),d=P(n(699)),p=P(n(1505)),h=P(n(2278)),m=P(n(1460)),y=n(112),b=P(n(545)),v=n(1799),E=n(1989),g=P(n(1647));function P(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var _=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=r=w(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={loading:!0},w(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"componentDidMount",value:function(){var e=this.props.noticeID;e<0||isNaN(e)?this.props.replace(this.getNoticeListPath()):e>0&&this.fetchData(e)}},{key:"fetchData",value:function(e){var t=this;this.props.getProjectNoticeById(e).then(function(){return t.setState({loading:!1})}).catch(function(){return t.handleInvalidNotice()})}},{key:"getNoticeListPath",value:function(){return this.props.projectPath+"/setting/notice"}},{key:"handleInvalidNotice",value:function(){(0,c.default)(this.props.notice)&&this.props.replace(this.getNoticeListPath())}},{key:"onDelete",value:function(e){var t=this;confirm("\u786e\u8ba4\u5220\u9664\u8be5\u516c\u544a\uff1f")&&this.props.deleteProjectNotice(e).then(function(){return(0,y.success)("\u5220\u9664\u9879\u76ee\u516c\u544a\u6210\u529f")}).finally(function(){return t.props.push(t.getNoticeListPath())})}},{key:"renderActionBar",value:function(e){var t=this,n=e.editable,r=e.id,o=e.ownerId,a=this.props,u=a.currentUserRole,c=a.userID;return n&&(c===o||u>=v.ROLE_AUTH.ADMIN)?l.default.createElement("span",null,l.default.createElement(i.Link,{className:g.default.edit,to:this.getNoticeListPath()+"/"+r+"/edit"},l.default.createElement(p.default,{className:g.default.icon}),"\u7f16\u8f91"),l.default.createElement("span",{className:g.default.delete,onClick:function(){return t.onDelete(r)}},l.default.createElement(h.default,{className:g.default.icon}),"\u5220\u9664")):null}},{key:"renderDetail",value:function(){var e=this.props.notice;if((0,c.default)(e))return null;var t=e.content,n=e.formattedUpdatedAt,r=e.owner,o=r.avatar,a=r.name,u=r.path;return l.default.createElement("div",{className:g.default.noticeDetail},l.default.createElement(i.Link,{className:g.default.detailAvatar,to:u},l.default.createElement(f.default,{src:o})),a,l.default.createElement("div",{className:g.default.detailActionBar},l.default.createElement("span",{className:g.default.detailTimestamp},l.default.createElement(s.default,{className:g.default.icon}),n),this.renderActionBar(e)),l.default.createElement(m.default,{className:g.default.detailContent,html:t}))}},{key:"renderBreadCrumb",value:function(){return l.default.createElement("span",{className:g.default.navigation},l.default.createElement(i.Link,{className:g.default.breadCrumb,to:this.getNoticeListPath()},"\u516c\u544a\u5217\u8868")," ","> \u516c\u544a\u8be6\u60c5")}},{key:"render",value:function(){return this.state.loading?l.default.createElement("div",null,l.default.createElement(d.default,null)," \u6b63\u5728\u52a0\u8f7d\u9879\u76ee\u516c\u544a..."):l.default.createElement("div",null,this.renderBreadCrumb(),this.renderDetail())}}]),t}();_.propTypes={currentUserRole:o.default.number.isRequired,deleteProjectNotice:o.default.func.isRequired,getProjectNoticeById:o.default.func.isRequired,notice:o.default.object.isRequired,noticeID:o.default.number.isRequired,projectPath:o.default.string,push:o.default.func,replace:o.default.func,userID:o.default.number.isRequired},t.default=(0,b.default)(function(e,t){var n=e.APP,r=n.currentProject.current_user_role_id,o=n.projectPath,a=n.user.id,l=e.PROJECT.setting.notice.notice,i=t.routeParams.noticeID;return{currentUserRole:r,notice:l,noticeID:parseInt(void 0===i?0:i,10),projectPath:o,userID:a}},{deleteProjectNotice:E.deleteProjectNotice,getProjectNoticeById:E.getProjectNoticeById,push:u.push,replace:u.replace})(_)},3775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=m(n(0)),l=n(2),i=m(l),u=n(226),c=m(n(544)),f=n(112),s=n(266),d=m(n(545)),p=n(1989),h=m(n(1647));function m(e){return e&&e.__esModule?e:{default:e}}var y=u.routerActions.push,b=u.routerActions.replace,v=(0,s.withAsyncMarkEditor)()(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=function(e,t){n.setState({editorState:e},t)},n.onSaveRef=function(e){n.editor=e},n.state={editorState:e.defaultEditorState,isEdit:!1},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),o(t,[{key:"componentDidMount",value:function(){var e=this.props.noticeID;e<0||isNaN(e)?this.props.replace(this.getNoticeListPath()):e>0&&this.fetchData(e)}},{key:"fetchData",value:function(e){var t=this;this.props.getProjectNoticeById(e).then(function(){t.setState({isEdit:!0},function(){t.editor.onFetch(t.props.notice.raw)})})}},{key:"onCancel",value:function(){var e=this.getNoticeListPath();if(this.getEditorContent().length>0)if(confirm("\u786e\u8ba4\u79bb\u5f00\u6b64\u9875\u9762\uff1f")){var t=this.props.notice.id;this.editor.onCancel(),this.props.push(e+"/"+t)}else this.editor.focus();else this.editor.onCancel(),this.props.push(e)}},{key:"onCreate",value:function(){var e=this,t=this.getEditorContent();t.length>0&&this.props.createProjectNotice(t).then(function(){e.editor.onSave(),(0,f.success)("\u65b0\u5efa\u9879\u76ee\u516c\u544a\u6210\u529f")}).finally(function(){var t=e.props.notice.id;e.props.push(e.getNoticeListPath()+"/"+t)})}},{key:"onUpdate",value:function(){var e=this,t=this.getEditorContent();if(t.length>0){var n=this.props.notice.id;this.props.updateProjectNotice(n,t).then(function(){e.editor.onSave(),(0,f.success)("\u4fee\u6539\u9879\u76ee\u516c\u544a\u6210\u529f")}).finally(function(){return e.props.push(e.getNoticeListPath()+"/"+n)})}}},{key:"getEditorContent",value:function(){return this.props.getPlainText(this.state.editorState).trim()}},{key:"hasContent",value:function(){return this.getEditorContent().length>0}},{key:"isModified",value:function(){return this.hasContent()&&this.props.MediumMarkEditor.getPlainText(this.state.editorState)!==this.props.notice.raw}},{key:"getNoticeListPath",value:function(){return this.props.projectPath+"/setting/notice"}},{key:"renderButtons",value:function(){var e=this,t=i.default.createElement(c.default,{className:"mr-10",disabled:!this.hasContent(),onClick:function(){return e.onCreate()}},"\u65b0\u5efa\u516c\u544a"),n=i.default.createElement(c.default,{className:"mr-10",disabled:!this.isModified(),onClick:function(){return e.onUpdate()}},"\u4fdd\u5b58\u4fee\u6539"),r=this.state.isEdit?n:t;return i.default.createElement("div",{className:"mt-20"},r,i.default.createElement(c.default,{empty:!0,onClick:function(){return e.onCancel()}},"\u53d6\u6d88"))}},{key:"renderHeader",value:function(){return i.default.createElement("h1",{className:h.default.editorHeader},this.state.isEdit?"\u7f16\u8f91\u516c\u544a":"\u65b0\u5efa\u516c\u544a")}},{key:"getAutoSaveKey",value:function(e){var t=this.props,n=t.noticeID,r=t.projectID;return e?"PROJECT_SETTING_NOTICE_UPDATE_"+n:"PROJECT_SETTING_NOTICE_CREATE_"+r}},{key:"renderMarkEditor",value:function(){var e=this,t=this.props,n=t.projectID,r=t.projectName,o=t.projectOwner,a=t.MediumMarkEditor,l=this.state,u=l.editorState,c=l.isEdit;return i.default.createElement(a,{className:h.default.markeditor,autoSaveKey:this.getAutoSaveKey(c),hashSearchParams:{owner:o,project:r},editorState:u,mentionParams:{context_type:"project_member",item_id:n},onChange:this.onChange,onCommandEnter:function(){return c?e.onUpdate():e.onCreate()},placeholder:"\u5728\u6b64\u8f93\u5165\u516c\u544a\u5185\u5bb9",projectId:n,ref:this.onSaveRef})}},{key:"render",value:function(){return i.default.createElement("div",null,this.renderHeader(),this.renderMarkEditor(),this.renderButtons())}}]),t}())||r;v.propTypes={createProjectNotice:a.default.func,getProjectNoticeById:a.default.func,updateProjectNotice:a.default.func,projectID:a.default.number,projectName:a.default.string,projectOwner:a.default.string,projectPath:a.default.string,notice:a.default.object,noticeID:a.default.number.isRequired,push:a.default.func,replace:a.default.func.isRequired,defaultEditorState:a.default.object,MediumMarkEditor:a.default.func,getPlainText:a.default.func,createWithContent:a.default.func},t.default=(0,d.default)(function(e,t){var n=e.APP,r=n.currentProject,o=n.projectPath,a=e.PROJECT.setting.notice.notice,l=t.routeParams.noticeID;return{notice:a,noticeID:parseInt(void 0===l?0:l,10),projectID:r.id,projectName:r.name,projectOwner:r.owner_user_name,projectPath:o}},{push:y,replace:b,createProjectNotice:p.createProjectNotice,getProjectNoticeById:p.getProjectNoticeById,updateProjectNotice:p.updateProjectNotice})(v)},3776:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=b(n(0)),l=n(2),i=b(l),u=n(168),c=b(n(262)),f=b(n(1455)),s=b(n(699)),d=b(n(545)),p=n(1989),h=b(n(3777)),m=b(n(3778)),y=b(n(1647));function b(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.onChange=function(e){o.props.router.push(o.getNoticeListPath()+"?page="+e),o.props.updatePager(r({},o.props.pager,{page:e}))},o.state={loading:!0},o}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),o(t,[{key:"componentDidMount",value:function(){this.pageGoto(this.props.pageParam)}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"componentWillReceiveProps",value:function(e){var t=e.pager.page;this.props.pager.page!==t&&this.pageGoto(t)}},{key:"pageGoto",value:function(e){if(e){if(this.isPageParamValid(e))return void this.fetchData(e);this.props.router.replace(""+this.getNoticeListPath())}this.fetchData()}},{key:"fetchData",value:function(e){var t=this;this.setState({loading:!0}),this.props.getProjectNotices(e).then(function(){return t.handleInvalidPage(e)}).finally(function(){t.unmounted||t.setState({loading:!1})})}},{key:"handleInvalidPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.props.pager.totalPage;e>t&&(this.props.router.replace(this.getNoticeListPath()+"?page="+t),this.fetchData(t))}},{key:"getNoticeListPath",value:function(){return this.props.projectPath+"/setting/notice"}},{key:"isPageParamValid",value:function(e){return!1===isNaN(parseInt(e,10))&&e>0}},{key:"renderList",value:function(){var e=this.props,t=e.notices,n=e.pager;return i.default.createElement("div",null,i.default.createElement(m.default,null),i.default.createElement("div",null,t.map(this.renderListItem,this)),i.default.createElement(f.default,{pager:n,onChange:this.onChange}))}},{key:"renderListItem",value:function(e){var t=e.formattedUpdatedAt,n=e.id,r=e.plainTextContent,o=e.owner,a=o.avatar,l=o.name,f=o.path;return i.default.createElement("div",{className:y.default.noticeListItem,key:n},i.default.createElement(u.Link,{className:y.default.avatar,to:f},i.default.createElement(c.default,{src:a})),i.default.createElement(u.Link,{className:y.default.noticePreview,to:this.getNoticeListPath()+"/"+n},i.default.createElement("div",{className:y.default.previewContent},r,i.default.createElement("div",{className:y.default.ellipse})),i.default.createElement("div",{className:y.default.previewActionBar},i.default.createElement("span",{className:y.default.name},l),i.default.createElement("span",{className:y.default.previewTimestamp},t))))}},{key:"render",value:function(){return this.state.loading?i.default.createElement("div",null,i.default.createElement(s.default,null)," \u6b63\u5728\u52a0\u8f7d\u9879\u76ee\u516c\u544a\u5217\u8868..."):0===this.props.pager.totalRow?i.default.createElement(h.default,null):this.renderList()}}]),t}();v.propTypes={getProjectNotices:a.default.func.isRequired,updatePager:a.default.func,notices:a.default.array,pageParam:a.default.string,pager:a.default.object,projectPath:a.default.string,router:a.default.object},t.default=(0,d.default)(function(e,t){var n=e.APP.projectPath,r=e.PROJECT.setting.notice,o=r.notices,a=r.pager;return{notices:o,pageParam:t.location.query.page,pager:a,projectPath:n}},{getProjectNotices:p.getProjectNotices,updatePager:p.updatePager})(v)},3777:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(0)),o=f(n(2)),a=n(168),l=f(n(702)),i=f(n(544)),u=f(n(545)),c=f(n(1647));function f(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.projectPath,n=void 0===t?"":t;return o.default.createElement(l.default,{icon:l.default.ICONS.Announcement,text:o.default.createElement("div",{className:c.default.emptyNotice},o.default.createElement("div",{className:c.default.note},"\u5f53\u524d\u9879\u76ee\u6682\u65e0\u516c\u544a"),o.default.createElement(a.Link,{to:n+"/setting/notice/create"},o.default.createElement(i.default,{size:"large"},"\u9a6c\u4e0a\u65b0\u5efa\u516c\u544a")))})};s.propTypes={projectPath:r.default.string.isRequired},t.default=(0,u.default)(function(e){return{projectPath:e.APP.projectPath}},{})(s)},3778:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),a=n(2),l=s(a),i=n(168),u=s(n(544)),c=s(n(545)),f=s(n(1647));function s(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){return l.default.createElement("div",{className:f.default.noticeHeader},l.default.createElement("h2",{className:f.default.title},"\u9879\u76ee\u516c\u544a\uff08"+this.props.totalRow+"\uff09"),l.default.createElement(i.Link,{className:f.default.create,to:this.props.projectPath+"/setting/notice/create"},l.default.createElement(u.default,{size:"default"},"\u65b0\u5efa\u516c\u544a")))}}]),t}();d.propTypes={projectPath:o.default.string.isRequired,totalRow:o.default.number.isRequired},t.default=(0,c.default)(function(e){return{projectPath:e.APP.projectPath,totalRow:e.PROJECT.setting.notice.pager.totalRow}},{})(d)},3779:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3780),a=(r=o)&&r.__esModule?r:{default:r},l=n(1449);t.default={path:"summary",documentTitle:(0,l.projectPage)(function(){return"\u9879\u76ee\u6982\u89c8"}),component:a.default}},3780:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),a=u(o),l=u(n(3781)),i=u(n(1990));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"render",value:function(){return a.default.createElement("div",null,a.default.createElement("h2",{className:i.default.title},"\u9879\u76ee\u6982\u89c8"),a.default.createElement(l.default,null))}}]),t}();t.default=c},3781:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),a=n(2),l=s(a),i=s(n(545)),u=s(n(3782)),c=n(3784),f=s(n(1990));function s(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"componentDidMount",value:function(){this.props.getServiceInfo()}},{key:"renderMemberNum",value:function(){return l.default.createElement("div",null,l.default.createElement("div",{className:f.default.infoBar},l.default.createElement("span",{className:f.default.infoTitle},"\u9879\u76ee\u6210\u5458\u6570"),l.default.createElement("span",{className:f.default.infoDetail},this.props.serviceInfo.memberNumDetail)),l.default.createElement(u.default,{percent:this.props.serviceInfo.memberNumPercent,level:this.props.serviceInfo.memberNumLevel}))}},{key:"renderRepoUsage",value:function(){return l.default.createElement("div",null,l.default.createElement("div",{className:f.default.infoBar},l.default.createElement("span",{className:f.default.infoTitle},"Git \u4ed3\u5e93\u4f7f\u7528\u60c5\u51b5"),l.default.createElement("span",{className:f.default.infoDetail},this.props.serviceInfo.gitRepoUsageDetail)),l.default.createElement(u.default,{percent:this.props.serviceInfo.gitRepoUsagePercent,level:this.props.serviceInfo.gitRepoUsageLevel}))}},{key:"render",value:function(){return l.default.createElement("div",{className:f.default.serviceInfo},l.default.createElement("div",{className:f.default.grid},l.default.createElement("div",{className:f.default.gridChild},this.renderMemberNum()),l.default.createElement("div",{className:f.default.gridChild},this.renderRepoUsage())))}}]),t}();d.propTypes={currentProject:o.default.object.isRequired,getServiceInfo:o.default.func.isRequired,serviceInfo:o.default.object},t.default=(0,i.default)(function(e){return{serviceInfo:e.PROJECT.setting.summary.serviceInfo,currentProject:e.APP.currentProject}},{getServiceInfo:c.getServiceInfo})(d)},3782:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(0)),a=n(2),l=c(a),i=c(n(8)),u=c(n(1990));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e,t,n,r=this.props,o=r.percent,a=r.level,c=(0,i.default)(u.default.progress,(e={},t=u.default[a],n=a,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),f={width:o+"%"};return l.default.createElement("div",{className:u.default.progressBar},l.default.createElement("div",{className:c,style:f}))}}]),t}();t.default=f,f.propTypes={percent:o.default.number.isRequired,level:o.default.string.isRequired}},3784:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getServiceInfo=function(){return(0,a.dispatchWithProjectAPIPrefix)(function(e,t,n){var i=n().APP.currentProject.plan;(0,a.autoDispatch)((0,o.get)(e+"/service_info"),t,l.ACTION.GET_SERVICE_INFO,function(e){return r({},(0,o.toCamelCase)(e.data),{plan:i})})})},t.getExportInfo=function(){return(0,a.dispatchWithProjectAPIPrefix)(function(e,t,n){var i=n().APP.currentProject.name;(0,a.autoDispatch)((0,o.get)(e+"/export"),t,l.ACTION.GET_EXPORT_INFO,function(e){return r({},(0,o.toCamelCase)(e.data),{name:i})})})},t.doExport=function(){return function(e,t){var n=t().APP.currentProject;(0,o.post)("/api/user/"+n.owner_user_name+"/project/"+n.name+"/export")}};var o=n(84),a=n(548),l=n(1963)},3785:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(546),o=n(1449);t.default={path:"member",documentTitle:(0,o.projectPage)(function(){return"\u6210\u5458\u7ba1\u7406"}),getComponent:function(e,t){n.e(157).then(function(){(0,r.injectAsyncReducer)("MEMBER_SELECTOR",n(2026).default),t(null,n(3922).default)}.bind(null,n)).catch(n.oe)}}},3786:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1449);t.default={path:"depot",documentTitle:(0,r.projectPage)(function(){return"\u4ed3\u5e93\u8bbe\u7f6e"}),getComponent:function(e,t){n.e(158).then(function(){return t(null,n(3928).default)}.bind(null,n)).catch(n.oe)}}},3787:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(51),o=n(1449);t.default={path:"webhook/v1",documentTitle:(0,o.projectPage)(function(){return"WebHook"}),getComponent:function(e,t){n.e(159).then(function(){(0,r.injectAsyncI18n)("WEBHOOK",n(3934)),t(null,n(3935).default)}.bind(null,n)).catch(n.oe)},indexRoute:{component:n(3788).default},childRoutes:[{path:"new",component:n(2279).default,documentTitle:(0,o.projectPage)(function(){return"\u65b0\u5efa WebHook"})},{path:":id/edit",component:n(3790).default,documentTitle:(0,o.projectPage)(function(){return"\u7f16\u8f91 WebHook"})}]}},3788:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=E(n(0)),i=n(2),u=E(i),c=n(168),f=E(n(544)),s=E(n(1460)),d=E(n(699)),p=E(n(550)),h=E(n(547)),m=E(n(1472)),y=n(112),b=E(n(263)),v=E(n(1991));function E(e){return e&&e.__esModule?e:{default:e}}var g=(o=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"refreshData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;this.timoutId&&(clearTimeout(this.timoutId),this.timoutId=null),this.timoutId=setTimeout(function(){e.props.fetchWebhookLogs().then(function(){e.refreshData()})},t)}},{key:"componentDidMount",value:function(){this.props.fetchWebhooks(),this.refreshData(0)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timoutId)}},{key:"delHook",value:function(e){var t=this;confirm("\u8bf7\u786e\u8ba4\u5220\u9664\u8be5 WebHook ?")&&this.props.deleteWebhook(e).then(function(){(0,y.success)("\u5220\u9664\u6210\u529f"),t.props.fetchWebhooks(),t.refreshData(0)})}},{key:"testHook",value:function(e){var t=this;this.setState({testing:!0}),this.props.testWebhook(e).then(function(){t.props.fetchWebhooks(),t.refreshData(0)})}},{key:"renderLogs",value:function(){var e=this.props.webhookLogs,t=e.loading,n=e.items,r=void 0===n?[]:n;return t?u.default.createElement("tr",null,u.default.createElement("td",{colSpan:"5"},u.default.createElement(d.default,null))):0===r.length?u.default.createElement("tr",null,u.default.createElement("td",{colSpan:"5"},"\u5c1a\u672a\u53d1\u9001\u8bb0\u5f55")):r.map(this.renderLog)}},{key:"renderLog",value:function(e,t){return u.default.createElement("tr",{key:t},u.default.createElement("td",null,0===e.status&&"\u5f85\u53d1\u9001",0!==e.status&&(0,b.default)(e.sendAt).fromNow()),u.default.createElement("td",null,e.reason),u.default.createElement("td",null,1===e.status&&u.default.createElement(p.default,null),0===e.status&&u.default.createElement(m.default,null),-1===e.status&&u.default.createElement(h.default,null),e.resultMsg,!e.resultMsg&&"Waiting..."),u.default.createElement("td",null,e.webhookUrl,!e.webhookUrl&&"WebHook \u5df2\u5220\u9664"),u.default.createElement("td",null,e.content))}},{key:"renderHooks",value:function(){var e=this.props.webhooks,t=e.loading,n=e.items,r=void 0===n?[]:n;return t?u.default.createElement("tr",null,u.default.createElement("td",{colSpan:"4"},u.default.createElement(d.default,null))):0===r.length?u.default.createElement("tr",null,u.default.createElement("td",{colSpan:"4"},"\u6682\u672a\u6dfb\u52a0 Webhook\u3002")):r.map(this.renderHook,this)}},{key:"renderHook",value:function(e,t){var n=this,r=this.props.projectPath+"/setting/webhook/v1/"+e.id+"/edit";return u.default.createElement("tr",{key:t},u.default.createElement("td",null,e.hookUrl),u.default.createElement("td",null,e.token),u.default.createElement("td",null,u.default.createElement(p.default,null)),u.default.createElement("td",null,u.default.createElement(c.Link,{to:r},u.default.createElement(f.default,{size:"small"},"\u4fee\u6539")),u.default.createElement(f.default,{size:"small",empty:!0,style:{marginLeft:"10px"},onClick:function(){return n.testHook(e.id)}},"\u6d4b\u8bd5"),u.default.createElement("span",{className:v.default.remove,onClick:function(){return n.delHook(e.id)}},u.default.createElement(h.default,null),"\u5220\u9664")))}},{key:"render",value:function(){var e=this.props.projectPath+"/setting/webhook/v1/new";return u.default.createElement("div",{className:v.default.webhookContainer},u.default.createElement("div",{className:v.default.header},u.default.createElement("h2",{className:"layout-content-h2"},"Webhook"),u.default.createElement(c.Link,{to:e},u.default.createElement(f.default,{className:v.default.addBtn},"\u65b0\u5efa Hook"))),u.default.createElement("h3",null,"Hook \u5217\u8868"),u.default.createElement("div",{className:v.default.hookList},u.default.createElement(s.default,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",{style:{width:"50%"}},"\u5730\u5740"),u.default.createElement("th",{style:{width:"20%"}},"\u4ee4\u724c"),u.default.createElement("th",{style:{width:"10%"}},"\u72b6\u6001"),u.default.createElement("th",{style:{width:"30%"}},"\u64cd\u4f5c"))),u.default.createElement("tbody",null,this.renderHooks())))),u.default.createElement("h3",null,"\u53d1\u9001\u8bb0\u5f55"),u.default.createElement("div",{className:v.default.logList},u.default.createElement(s.default,null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"\u53d1\u9001\u65f6\u95f4"),u.default.createElement("th",null,"\u89e6\u53d1\u539f\u56e0"),u.default.createElement("th",null,"\u7ed3\u679c\u4fe1\u606f"),u.default.createElement("th",null,"\u5730\u5740"),u.default.createElement("th",null,"\u5185\u5bb9"))),u.default.createElement("tbody",null,this.renderLogs())))))}}]),t}(),r.propTypes={webhooks:l.default.shape({loading:l.default.bool,items:l.default.array}),webhookLogs:l.default.shape({loading:l.default.bool,items:l.default.array}),fetchWebhooks:l.default.func,fetchWebhookLogs:l.default.func,testWebhook:l.default.func,deleteWebhook:l.default.func,projectPath:l.default.string},o);t.default=g},3790:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=w(n(0)),u=n(2),c=w(u),f=w(n(261)),s=n(1506),d=w(n(701)),p=w(n(544)),h=w(n(699)),m=n(226),y=n(715),b=n(168),v=n(2279),E=n(112),g=n(106),P=w(n(1991));function w(e){return e&&e.__esModule?e:{default:e}}var _=d.default.CheckboxGroup,j=(o=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onSubmit=e.onSubmit.bind(e),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),l(t,[{key:"componentDidMount",value:function(){var e=this.props.params;this.props.getWebhook(e.id)}},{key:"onSubmit",value:function(e){var t=this,n=this.props,r=n.params,o=n.projectPath;(0,n.updateWebhook)(r.id,e).then(function(){(0,E.success)("\u7f16\u8f91\u6210\u529f"),g.IS_ENTERPRISE?t.props.push(o+"/setting/webhook/v1"):t.props.push(o+"/setting/webhook")})}},{key:"render",value:function(){var e=this.props,t=e.fields,n=t.hookUrl,r=t.token,o=t.type,l=e.projectPath,i=e.handleSubmit,u="";return u=g.IS_ENTERPRISE?l+"/setting/webhook/v1":l+"/setting/webhook",c.default.createElement("div",{className:P.default.webhookContainer},c.default.createElement("div",{className:P.default.header},c.default.createElement("h2",{className:"layout-content-h2"},"\u4fee\u6539 Webhook")),this.props.webhook.loading&&c.default.createElement(h.default,null),c.default.createElement("form",{className:P.default.webhookForm,onSubmit:i(this.onSubmit),hidden:this.props.webhook.loading},c.default.createElement("div",{className:P.default.title},"URL"),c.default.createElement("div",{className:P.default.input},c.default.createElement(f.default,a({type:"input",block:!0,size:"large"},(0,s.input)(n)))),c.default.createElement("div",{className:P.default.title},"Token"),c.default.createElement("div",{className:P.default.input},c.default.createElement(f.default,a({type:"input",value:r,block:!0,size:"large",placeholder:"\u975e\u5fc5\u586b"},(0,s.input)(r)))),c.default.createElement("h3",null,"\u76d1\u542c\u4e8b\u4ef6"),c.default.createElement(_,a({options:v.typeOptions},o)),c.default.createElement("div",{className:P.default.buttonGroup},c.default.createElement(p.default,{htmlType:"submit",onClick:this.submit},"\u66f4\u65b0"),c.default.createElement(b.Link,{to:u},c.default.createElement(p.default,{empty:!0},"\u53d6\u6d88")))))}}]),t}(),r.propTypes=a({projectPath:i.default.string,params:i.default.object},y.propTypes),o);t.default=(0,y.reduxForm)({form:"WebhookEditForm",fields:["hookUrl","token","type"]},function(e,t){return{initialValues:t.webhook}},{push:m.routerActions.push})(j)},3791:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1449);t.default={path:"webhook",documentTitle:(0,r.projectPage)(function(){return"WebHook"}),indexRoute:{getComponent:function(e,t){Promise.all([n.e(27),n.e(160)]).then(function(){t(null,n(3937).default)}.bind(null,n)).catch(n.oe)}},childRoutes:[{path:"create",documentTitle:(0,r.projectPage)(function(){return"\u65b0\u5efa WebHook"}),getComponent:function(e,t){Promise.all([n.e(27),n.e(67)]).then(function(){t(null,n(2306).default)}.bind(null,n)).catch(n.oe)}},{path:":id/edit",documentTitle:(0,r.projectPage)(function(){return"\u4fee\u6539 WebHook"}),getComponent:function(e,t){Promise.all([n.e(27),n.e(67)]).then(function(){t(null,n(2306).default)}.bind(null,n)).catch(n.oe)}}]}},3792:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(546),o=n(1449);t.default={path:"deploy_key",documentTitle:(0,o.projectPage)(function(){return"\u90e8\u7f72\u516c\u94a5"}),getComponent:function(e,t){n.e(161).then(function(){(0,r.injectAsyncReducer)("DEPLOY_KEY",n(1964).default),t(null,n(3946).default)}.bind(null,n)).catch(n.oe)},indexRoute:{component:n(3793).default},childRoutes:[{path:"new",component:n(3795).default,documentTitle:(0,o.projectPage)(function(){return"\u65b0\u5efa\u90e8\u7f72\u516c\u94a5"})}]}},3793:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=k(n(0)),u=n(2),c=k(u),f=n(114),s=n(113),d=n(112),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2280)),h=n(168),m=k(n(544)),y=k(n(1460)),b=k(n(699)),v=k(n(547)),E=k(n(704)),g=k(n(1508)),P=k(n(1487)),w=n(106),_=n(1562),j=k(n(263)),O=k(n(2281));function k(e){return e&&e.__esModule?e:{default:e}}var T=(o=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.afterTwofactorConfirm=function(){return Promise.reject("No confirm function specified")},e.showTwofactorModal=e.showTwofactorModal.bind(e),e.hideTwofactorModal=e.hideTwofactorModal.bind(e),e.onConfirmOAuth=e.onConfirmOAuth.bind(e),e.delKey=e.delKey.bind(e),e.state={showTwofactorModal:!1,removing:!1},e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),l(t,[{key:"showTwofactorModal",value:function(){this.setState({showTwofactorModal:!0})}},{key:"hideTwofactorModal",value:function(){this.setState({showTwofactorModal:!1})}},{key:"renderKeys",value:function(){var e=this.props.deployKeys,t=e.loading,n=e.items,r=void 0===n?[]:n;return t?c.default.createElement("tr",null,c.default.createElement("td",{colSpan:"5"},c.default.createElement(b.default,null))):0===r.length?c.default.createElement("tr",null,c.default.createElement("td",{colSpan:"5"},"\u6682\u672a\u6dfb\u52a0\u90e8\u7f72\u516c\u94a5")):r.map(this.renderKey,this)}},{key:"renderKey",value:function(e,t){var n=this;return c.default.createElement("tr",{key:t},c.default.createElement("td",null,e.title),c.default.createElement("td",null,e.fingerPrint),c.default.createElement("td",null,e.allowWrite?"\u8bfb\u3001\u5199":"\u53ea\u8bfb"),c.default.createElement("td",null,(0,j.default)(e.createdAt).fromNow()),c.default.createElement("td",null,c.default.createElement("span",{className:O.default.remove,onClick:function(){return n.delKey(e.id)}},c.default.createElement(v.default,null),"\u5220\u9664")))}},{key:"componentDidMount",value:function(){var e=this.props.params;this.props.fetchDeployKeys(e.owner,e.project)}},{key:"onConfirmOAuth",value:function(e){this.afterTwofactorConfirm(e)}},{key:"delKey",value:function(e){var t=this;if(!this.state.removing){var n=this.props.params;this.showTwofactorModal(),this.afterTwofactorConfirm=function(r){return t.setState({removing:!0}),t.props.deleteDeployKey(n.owner,n.project,e,r).then(function(){(0,d.success)("\u5220\u9664\u6210\u529f"),t.props.fetchDeployKeys(n.owner,n.project),t.setState({showTwofactorModal:!1})}).finally(function(){return t.setState({removing:!1})})}}}},{key:"render",value:function(){var e=this.props.projectPath,t=w.IS_ENTERPRISE?"https://e.coding.net/help/git/ssh-key/#i-4":"https://coding.net/help/doc/git/ssh-key.html#i-4";return c.default.createElement("div",{className:O.default.deployKeyContainer},c.default.createElement("div",{className:O.default.header},c.default.createElement("div",{className:O.default.titleWrap},c.default.createElement("h2",{className:"layout-content-h2"},"\u90e8\u7f72\u516c\u94a5"),(0,_.isCoding)()&&c.default.createElement("a",{target:"_blank",href:t},c.default.createElement("span",{className:O.default.linkWrap},c.default.createElement(g.default,{className:"question"})))),c.default.createElement(h.Link,{to:e+"/setting/deploy_key/new"},c.default.createElement(m.default,{className:O.default.addBtn},"\u65b0\u5efa\u90e8\u7f72\u516c\u94a5"))),c.default.createElement(E.default,{type:"warning"},"\u90e8\u7f72\u516c\u94a5\u7528\u4ee5\u90e8\u7f72\u9879\u76ee\uff0c \u53ea",c.default.createElement("strong",null,"\u9488\u5bf9\u672c\u9879\u76ee"),"\uff0c \u53ef\u8bbe\u7f6e\u62e5\u6709\u53ea\u8bfb\u6216\u8005\u8bfb\u5199\u6743\u9650\uff08\u9ed8\u8ba4\u4e3a",c.default.createElement("strong",null,"\u53ea\u8bfb"),"\uff09\u3002 \u4e0d\u80fd\u8ddf\u4e2a\u4eba\u516c\u94a5\u901a\u7528\uff0c\u5982\u9700\u8981\u8bbe\u7f6e\u4e2a\u4eba\u516c\u94a5\uff0c",c.default.createElement(h.Link,{to:"/user/account/setting/keys"},"\u8bf7\u70b9\u51fb\u8fd9\u91cc")),c.default.createElement("h3",null,"\u5728\u6b64\u9879\u76ee\u542f\u7528\u7684\u90e8\u7f72\u516c\u94a5"),c.default.createElement("div",{className:O.default.keyList},c.default.createElement(y.default,null,c.default.createElement("table",null,c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",{style:{width:"30%"}},"\u516c\u94a5\u540d\u79f0"),c.default.createElement("th",{style:{width:"40%"}},"\u516c\u94a5\u5185\u5bb9\uff08Finger Print\uff09"),c.default.createElement("th",{style:{width:"10%"}},"\u6743\u9650"),c.default.createElement("th",{style:{width:"20%"}},"\u6dfb\u52a0\u65f6\u95f4"),c.default.createElement("th",{style:{width:"10%"}},"\u64cd\u4f5c"))),c.default.createElement("tbody",null,this.renderKeys())))),c.default.createElement(P.default,{show:this.state.showTwofactorModal,onHide:this.hideTwofactorModal,onConfirm:this.onConfirmOAuth}))}}]),t}(),r.propTypes={deployKeys:i.default.shape({loading:i.default.bool,items:i.default.array}),params:i.default.object,fetchDeployKeys:i.default.func,deleteDeployKey:i.default.func,projectPath:i.default.string},o);t.default=(0,s.connect)(function(e){var t=e.PROJECT.setting.deployKey,n=e.APP.projectPath;return a({},t,{projectPath:n})},function(e){return(0,f.bindActionCreators)(p,e)})(T)},3795:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=j(n(0)),u=n(2),c=j(u),f=j(n(261)),s=n(1506),d=j(n(701)),p=j(n(704)),h=n(112),m=j(n(544)),y=n(226),b=n(715),v=n(168),E=j(n(1487)),g=n(1698),P=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2280)),w=n(106),_=j(n(2281));function j(e){return e&&e.__esModule?e:{default:e}}var O=(o=r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onSubmit=e.onSubmit.bind(e),e.afterTwofactorConfirm=function(){return Promise.reject("No confirm function specified")},e.showTwofactorModal=e.showTwofactorModal.bind(e),e.hideTwofactorModal=e.hideTwofactorModal.bind(e),e.onConfirmOAuth=e.onConfirmOAuth.bind(e),e.state={showTwofactorModal:!1,creating:!1},e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),l(t,[{key:"showTwofactorModal",value:function(){this.setState({showTwofactorModal:!0})}},{key:"hideTwofactorModal",value:function(){this.setState({showTwofactorModal:!1})}},{key:"onConfirmOAuth",value:function(e){this.afterTwofactorConfirm(e)}},{key:"onSubmit",value:function(e){var t=this,n=this.props,r=n.params,o=n.createDeployKey,a=n.projectPath;this.showTwofactorModal(),this.afterTwofactorConfirm=function(n){return t.setState({creating:!0}),o(r.owner,r.project,e,n).then(function(){(0,h.success)("\u65b0\u5efa\u6210\u529f"),t.props.push(a+"/setting/deploy_key")}).finally(function(){return t.setState({creating:!1})})}}},{key:"render",value:function(){var e=this.props,t=e.fields,n=t.title,r=t.content,o=t.allowWrite,l=e.handleSubmit,i=e.projectPath;return c.default.createElement("div",{className:_.default.deployKeyContainer},c.default.createElement("div",{className:_.default.header},c.default.createElement("h2",{className:"layout-content-h2"},"\u65b0\u5efa\u90e8\u7f72\u516c\u94a5")),c.default.createElement(p.default,{type:"warning"},"\u90e8\u7f72\u516c\u94a5\u7528\u4ee5\u90e8\u7f72\u9879\u76ee\uff0c \u53ea",c.default.createElement("strong",null,"\u9488\u5bf9\u672c\u9879\u76ee"),"\uff0c \u53ef\u8bbe\u7f6e\u62e5\u6709\u53ea\u8bfb\u6216\u8005\u8bfb\u5199\u6743\u9650\uff08\u9ed8\u8ba4\u4e3a",c.default.createElement("strong",null,"\u53ea\u8bfb"),"\uff09\u3002 \u4e0d\u80fd\u8ddf\u4e2a\u4eba\u516c\u94a5\u901a\u7528\uff0c\u5982\u9700\u8981\u8bbe\u7f6e\u4e2a\u4eba\u516c\u94a5\uff0c",c.default.createElement(v.Link,{to:"/user/account/setting/keys"},"\u8bf7\u70b9\u51fb\u8fd9\u91cc")),w.IS_ENTERPRISE&&c.default.createElement(p.default,{type:"warning",className:_.default.enterpriseWarning},"\u8bf7\u5728\u6dfb\u52a0\u524d\u786e\u8ba4\u90e8\u7f72\u516c\u94a5\u5c5e\u4e8e\u516c\u53f8\uff08\u56e2\u961f\uff09\uff0c\u800c\u4e0d\u662f\u4e2a\u4eba\u3002 \u56e0\u4e3a\u4e2a\u4eba\u5728\u9000\u51fa\u516c\u53f8\uff08\u56e2\u961f\uff09\u540e\uff0c\u672c\u516c\u94a5\u5c06\u4e0d\u4f1a\u88ab\u5220\u9664\u3002"),c.default.createElement("form",{className:_.default.deployKeyForm,onSubmit:l(this.onSubmit)},c.default.createElement("h3",null,"\u516c\u94a5\u540d\u79f0"),c.default.createElement(f.default,a({type:"input",placeholder:"\u81ea\u5b9a\u4e49\u516c\u94a5\u540d\u79f0\uff0c\u53ef\u4e0d\u586b",block:!0,size:"large"},(0,s.input)(n))),c.default.createElement("h3",null,"\u516c\u94a5\u5185\u5bb9"),c.default.createElement(f.default,a({type:"textarea",value:r,block:!0,size:"large",placeholder:g.contentPlaceHolder,autoSize:{minRows:6},spellCheck:"false"},(0,s.input)(r))),c.default.createElement(d.default,a({className:_.default.checkbox},(0,s.input)(o)),"\u6388\u4e88\u63a8\u9001\u6743\u9650"),c.default.createElement("div",{className:_.default.buttonGroup},c.default.createElement(m.default,{disabled:this.state.creating,htmlType:"submit",onClick:this.submit},"\u65b0\u5efa"),c.default.createElement(v.Link,{to:i+"/setting/deploy_key"},c.default.createElement(m.default,{empty:!0},"\u53d6\u6d88")))),c.default.createElement(E.default,{show:this.state.showTwofactorModal,onHide:this.hideTwofactorModal,onConfirm:this.onConfirmOAuth}))}}]),t}(),r.propTypes=a({params:i.default.object,createDeployKey:i.default.func,projectPath:i.default.string},b.propTypes),o);t.default=(0,b.reduxForm)({form:"DeployKeyNewForm",fields:["title","content","allowWrite"]},function(e){return{projectPath:e.APP.projectPath}},{push:y.routerActions.push,createDeployKey:P.createDeployKey})(O)},3796:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(51),o=n(1449);t.default={path:"label",documentTitle:(0,o.projectPage)(function(){return"\u5206\u7c7b\u6807\u7b7e"}),getComponent:function(e,t){n.e(162).then(function(){(0,r.injectAsyncI18n)("LABEL",n(790)),t(null,n(3947).default)}.bind(null,n)).catch(n.oe)}}}}]);
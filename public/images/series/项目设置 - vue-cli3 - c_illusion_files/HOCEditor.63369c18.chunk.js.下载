(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{1447:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();t.createWithContent=v,t.default=function(e){var t,r;return r=t=function(t){function r(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var o=arguments.length,s=Array(o),i=0;i<o;i++)s[i]=arguments[i];return n=P(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(s))),t=n,n.state={hashSearchParams:n.props.hashSearchParams,lastEdit:null},n.onChange=function(e,t){var r=e.getCurrentContent().getPlainText();if(r!==n.lastEdit){var a=n.props.onChange;a(e,t),n.setState({lastEdit:r},function(){n.setHashSearchParamsHandler(e)})}},n.focus=function(){n.editor.focus()},n.focusToEnd=function(){n.editor.focusToEnd()},n.onFetch=function(e){n.editor.hasLocalSave()?n.focusToEnd():n.setState({lastEdit:e},function(){n.props.onChange(v(e),n.focusToEnd)})},n.onSave=function(){n.editor.clearLocalSave(),n.editor.clear()},n.onCancel=function(){n.editor.clearLocalSave()},n.createPreviewPromise=function(){return l.createPreviewPromise.apply(l,arguments).then(function(e){return setTimeout(function(){return(0,p.default)(document)}),e})},n.getPrevCursorText=function(e){var t=e.getCurrentContent(),r=e.getSelection(),a=r.getFocusKey(),n=t.getBlockForKey(a),o=r.getStartOffset(),s=n.getText(),i=s.substring(0,o);return i},n.setHashSearchParamsHandler=function(e){var t="",r=n.props.hashSearchParams.project,o=n.getPrevCursorText(e),s=o.lastIndexOf("#");if(o.length>0&&s>=0){var i=o.substring(0,s).lastIndexOf(" ");return t=o.substring(i>=0?i+1:0,s),0===s?void n.setHashSearchParams(a({},n.props.hashSearchParams,{project:r})):t.indexOf("#")>=0?void n.setHashSearchParams(!1):void n.setHashSearchParams(a({},n.props.hashSearchParams,{project:t||r}))}n.setHashSearchParams(!1)},n.setHashSearchParams=function(e){n.setState({hashSearchParams:e})},P(n,t)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),n(r,[{key:"componentDidMount",value:function(){this.props.autoFocus&&this.focus()}},{key:"render",value:function(){var t=this,r=this.props,n=r.className,o=r.mentionParams,s=function(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}(r,["className","mentionParams"]),c=d.IS_ENTERPRISE?this.state:this.props,p=c.hashSearchParams,m=(0,u.default)(h.default.markEditor,n);return i.default.createElement(f.default,a({className:m,ref:function(e){return t.editor=e},createPreviewPromise:this.createPreviewPromise,createMentionListPromise:o&&l.createMentionListPromise(o),createHashSearchPromise:p?l.createHashSearchPromise(p):l.emptyHashSearchPromise(),emojiList:l.emojiList,recommendEmojiList:l.recommendEmojiList,onChange:this.onChange,suggestText:function(e,t){if("@"===t)return e.name+"("+e.gk+")"}},s,e(this.props)))}}]),r}(s.Component),t.propTypes={className:o.default.string,autoFocus:o.default.bool,mentionParams:o.default.object,hashSearchParams:o.default.object,onChange:o.default.func.isRequired},t.getPlainText=f.default.getPlainText,t.defaultProps={hashSearchParams:{}},r};var o=m(r(0)),s=r(2),i=m(s),c=r(2145),u=m(r(8)),f=m(r(1438)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(755)),h=m(r(3146)),p=m(r(1825)),d=r(106);function m(e){return e&&e.__esModule?e:{default:e}}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e){var t=c.ContentState.createFromText(e);return c.EditorState.createWithContent(t)}},1825:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,n=r(2040),o=(a=n)&&a.__esModule?a:{default:a};t.default=function(e){e&&e.querySelectorAll(".language-graph").forEach(function(e){try{o.default.init(void 0,e)}catch(t){e.innerHTML=t}})}},3146:function(e,t,r){e.exports={"mark-editor":"mark-editor-3ye",markEditor:"mark-editor-3ye"}}}]);